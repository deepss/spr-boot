task setupSonar {
  doLast {
    def props = [
        'sonar.projectKey'                 : 'com.transcendinsights.sonar:dp-measure-report-service',
        'sonar.projectName'                : 'dp-measure-report-service',
        'sonar.projectVersion'             : "$version".toString(),

        'sonar.github.repository'          : 'transcendinsights/dp-measure-report-service',

        'sonar.sources'                    : 'src/main/groovy',

        'sonar.sourceEncoding'             : 'UTF-8',

        'groovy.sonar.tests'               : 'src/test/groovy,src/integration-test/groovy',

        'sonar.surefire.reportsPath'       : 'build/reports/test',
        'sonar.junit.reportsPath'          : 'build/reports/test',

        'sonar.groovy.cobertura.reportPath': 'build/reports/cobertura/coverage.xml',

        'sonar.scm.url'                    : 'scm:git:git://giturl',
        'sonar.scm.enabled'                : 'true',

        'sonar.jdbc.username'              : 'sonar',
        'sonar.jdbc.password'              : 'sonar',
    ] as Properties

    def writer = new FileWriter('sonar-project.properties')
    props.store writer, 'Generated by gradle build'
  }
}